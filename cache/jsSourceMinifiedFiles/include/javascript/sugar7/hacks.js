(function(app){var _oldMetadataSet=app.metadata.set;app.metadata.set=function(data){_.each(data.modules,function(module){if(!_.isUndefined(module.fields)){var field=module.fields.team_name;if(field){delete field.len;field.type="teamset";}
if(module.fields.acl_team_names){module.fields.acl_team_names.type='teamset';}
_.each(module.fields,function(field){if(field.name&&(field.type==="relate")&&(field.name.length>2&&(field.name.length-
field.name.lastIndexOf("_id"))===3)){field.type="id";delete field.source;}});}},this);_oldMetadataSet.apply(this,arguments);};app.data.sync=_.wrap(app.data.sync,function(_super,method,model,options){if(app.config.platform==='base'){options=options||{};options.params=_.extend(options.params||{},{erased_fields:true});}
return _super.call(app.data,method,model,options);});})(SUGAR.App);