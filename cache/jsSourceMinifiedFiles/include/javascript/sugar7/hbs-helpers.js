(function(app){app.events.on("app:init",function(){Handlebars.registerHelper('moduleIconLabel',function(module){return app.lang.getModuleIconLabel(module);});Handlebars.registerHelper('moduleIconToolTip',function(module){return app.lang.getModuleName(module);});Handlebars.registerHelper('getDDLabel',function(value,key){return app.lang.getAppListStrings(key)[value]||value;});Handlebars.registerHelper('subViewTemplate',function(key,data,options){var frame,template;template=app.template.getView(key,options.hash.module);frame=_.extend(Handlebars.createFrame(options.data||{}),options.hash);return template?template(data,{data:frame}):'';});Handlebars.registerHelper('subFieldTemplate',function(fieldName,view,data,options){var frame,template;template=app.template.getField(fieldName,view,options.hash.module);frame=_.extend(Handlebars.createFrame(options.data||{}),options.hash);return template?template(data,{data:frame}):'';});Handlebars.registerHelper('subLayoutTemplate',function(key,data,options){var frame,template;template=app.template.getLayout(key,options.hash.module);frame=_.extend(Handlebars.createFrame(options.data||{}),options.hash);return template?template(data,{data:frame}):'';});Handlebars.registerHelper('buildUrl',function(options){return new Handlebars.SafeString(app.utils.buildUrl(options.hash.url));});Handlebars.registerHelper('loading',function(str,options){str=app.lang.get(str);var cssClass=['loading'];if(_.isString(options.hash.cssClass)){cssClass=_.unique(cssClass.concat(Handlebars.Utils.escapeExpression(options.hash.cssClass).split(' ')));}
return new Handlebars.SafeString('<div class="'+cssClass.join(' ')+'">'
+Handlebars.Utils.escapeExpression(str)
+'<i class="l1">&#46;</i><i class="l2">&#46;</i><i class="l3">&#46;</i>'
+'</div>');});Handlebars.registerHelper('decoratedField',function(type,view,options){var def={type:type,field:this};var field=app.view.createField({type:type,def:def,viewDefs:def,view:view,model:options.hash.model,viewName:options.hash.template,});if(options.hash.parent&&_.isArray(options.hash.parent.fields)){options.hash.parent.fields.push(field);}
return field.getPlaceholder();});Handlebars.registerHelper('timeAgo',function(str,options){return moment?moment.utc(str).fromNow():str;});Handlebars.registerHelper('or',function(){for(let i=0;i<arguments.length-1;i++){if(!!arguments[i]){return true;}}
return false;});Handlebars.registerHelper('buildIcon',function(iconClass){return iconClass.includes('sicon')?`sicon ${iconClass}`:`fa ${iconClass}`;});});})(SUGAR.App);