(function register(app){app.events.on('app:init',function init(){function DocumentMerge(def){this.def=def;}
DocumentMerge.prototype.run=function(opts,currentExecution){const actionDef=this.def;const templateId=actionDef.properties.id;const templateName=actionDef.properties.name;const isPdf=actionDef.properties.pdf;this.mergeDocument(opts,templateId,templateName,isPdf,currentExecution);};DocumentMerge.prototype.mergeDocument=function(opts,templateId,templateName,isPdf,currentExecution){const recordModel=opts.recordModel;const currentRecordId=recordModel.get('id');const currentRecordModule=recordModel.module;app.events.trigger('document_merge:show_widget');app.events.trigger('document:merge',{currentRecordId,currentRecordModule,templateId,templateName,isPdf,});app.alert.show('wdocs_loading',{level:'info',messages:app.lang.getModString('LBL_DOCUMENT_MERGIN_ACTION_PROCESS','DocumentMerges'),autoClose:true,});currentExecution.nextAction();};app.actions=app.actions||{};app.actions=_.extend(app.actions,{DocumentMerge:DocumentMerge,});});})(SUGAR.App);