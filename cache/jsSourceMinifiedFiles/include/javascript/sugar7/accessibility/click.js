(function(app){app.accessibility=app.accessibility||{};app.accessibility.helpers=app.accessibility.helpers||{};app.accessibility.helpers.click={run:function(component){var self=this,$el,events;if(component instanceof app.view.Component){$el=component.$el;}else if(_.isArray(component)){component.each(function(){self.run(this);});return;}else if(component.length>1){component.each(function(){self.run($(this));});return;}else{$el=component;}
events=$._data($el[0]||$el,'events');if(!events||!events.click){app.logger.debug('Found no events on '+app.accessibility.getElementTag($el));return;}
_.each(events.click,function(clickEvent){if(clickEvent.selector){$el.find(clickEvent.selector).each(function(){self._makeElementCompliant($(this));});}else{self._makeElementCompliant($el);}});},_isElementCompliant:function($el){var tag=$el.prop('tagName');if(!tag){app.logger.debug('The element does not have a tag name');return true;}
switch(tag.toLowerCase()){case'button':case'input':case'select':case'textarea':return true;case'a':return!!($el.attr('href'))||$el.attr('role')==='button';case'area':return!!($el.attr('href'));default:return $el[0].hasAttribute('tabindex');}},_makeElementCompliant:function($el){var role,tagName,tagPretty;role=$el.attr('role');tagName=$el.prop('tagName').toLowerCase();tagPretty=app.accessibility.getElementTag($el);if(this._isElementCompliant($el)){app.logger.debug('Found '+tagPretty+' to be compliant');if(tagName==='a'&&role==='button'&&!$el[0].hasAttribute('tabindex')){$el.attr('tabindex',0);}}else{app.logger.debug('Made '+tagPretty+' compliant');$el.attr('tabindex',-1);}}};})(SUGAR.App);