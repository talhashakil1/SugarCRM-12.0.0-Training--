var PMSE=PMSE||{};PMSE.Element=function(options){PMSE.Base.call(this,options);this.x=null;this.y=null;this.width=null;this.height=null;this.html=null;this.style=null;this.visible=null;this.zOrder=null;this.template=null;this.template2=null;this.helper=null;PMSE.Element.prototype.initObject.call(this,options);};PMSE.Element.prototype=new PMSE.Base();PMSE.Element.prototype.type='Base';PMSE.Element.prototype.family='Base';PMSE.Element.prototype.initObject=function(options){var defaults={style:{cssProperties:{},cssClasses:[]},width:0,height:0,x:0,y:0,zOrder:1,visible:true};$.extend(defaults,options);this.setStyle(new PMSE.Style({belongsTo:this,cssProperties:defaults.style.cssProperties,cssClasses:defaults.style.cssClasses})).setDimension(defaults.width,defaults.height).setPosition(defaults.x,defaults.y).setZOrder(defaults.zOrder).setVisible(defaults.visible);};PMSE.Element.prototype.setElementHelper=function(options){var configObject={decimalSeparator:App.config.defaultDecimalSeparator,numberGroupingSeparator:App.config.defaultNumberGroupingSeparator,currencies:project?project.getMetadata('currencies'):[],dateFormat:project?App.date.getUserDateFormat():null,timeFormat:project?App.user.getPreference('timepref'):null};$.extend(configObject,options);this.helper=new PMSE.ElementHelper(configObject);this.helper._parent=this;return this;};PMSE.Element.prototype.setId=function(newID){this.id=newID;if(this.html){this.html.id=this.id;}
return this;};PMSE.Element.prototype.setX=function(x){if(typeof x==='number'){this.x=x;if(this.html){this.style.addProperties({left:this.x});}}else{throw new Error('setX: x param is not a number');}
return this;};PMSE.Element.prototype.setY=function(y){if(typeof y==='number'){this.y=y;if(this.html){this.style.addProperties({top:this.y});}}else{throw new Error('setY: y param is not a number');}
return this;};PMSE.Element.prototype.setWidth=function(w){if(typeof w==='number'){this.width=w;if(this.html){this.style.addProperties({width:this.width});}}else{throw new Error('setWidth: w is not a number');}
return this;};PMSE.Element.prototype.setHeight=function(h){if(typeof h==='number'){this.height=h;if(this.html){this.style.addProperties({height:this.height});}}else{throw new Error('setHeight: h is not a number');}
return this;};PMSE.Element.prototype.setPosition=function(x,y){this.setX(x);this.setY(y);return this;};PMSE.Element.prototype.setDimension=function(w,h){this.setWidth(w);this.setHeight(h);return this;};PMSE.Element.prototype.setZOrder=function(z){if(typeof z==='number'&&z>0){this.zOrder=z;if(this.html){this.style.addProperties({zIndex:this.zOrder});}}
return this;};PMSE.Element.prototype.setVisible=function(value){if(_.isBoolean(value)){this.visible=value;if(this.html){if(value){this.style.addProperties({display:"inline"});}else{this.style.addProperties({display:"none"});}}}
return this;};PMSE.Element.prototype.setStyle=function(style){if(style instanceof PMSE.Style){this.style=style;}
return this;};PMSE.Element.prototype.createHTMLElement=function(type){return document.createElement(type);};PMSE.Element.prototype.createHTML=function(){if(!this.html){this.html=this.createHTMLElement('div');this.html.id=this.id;this.style.applyStyle();this.style.addProperties({position:"absolute",left:this.x,top:this.y,width:this.width,height:this.height,zIndex:this.zOrder});}
return this.html;};PMSE.Element.prototype.paint=function(){};PMSE.Element.prototype.getHTML=function(){if(!this.html){this.createHTML();}
return this.html;};PMSE.Element.prototype.compileTemplate=function(template){var source=App.metadata.getView('pmse_Business_Rules').businessrules.templates[template].replace(/\r?\n|\r/g,'');return Handlebars.compile(source);};PMSE.Element.prototype.getHTMLFromTemplate=function(template,context){if(template){var html=template(context);var parsed=$.parseHTML(html);return parsed[0];}
return null;};PMSE.Element.prototype.calculateWidth=function(text,font){var f=font||'12px arial',$o=$(this.createHTMLElement('div')),w;$o.text(text).css({'position':'absolute','float':'left','white-space':'nowrap','visibility':'hidden','font':f}).appendTo($('body')),w=$o.width();$o.remove();return w;};