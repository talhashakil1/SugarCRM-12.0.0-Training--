{{!--
/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
--}}

<div class="comment-log-dashlet-content">
    <div class="new-comment">
        <textarea class="taggable" placeholder="{{str "LBL_COMMENTS_LOG_DASHLET_PLACEHOLDER"}}"></textarea>
        <button data-action="save" class="btn btn-primary btn-mini commentSubmit" value="{{str "LBL_COMMENTS_LOG_DASHLET_BUTTON_ADD"}}" >{{str "LBL_COMMENTS_LOG_DASHLET_BUTTON_ADD"}}</button>
    </div>
    <ul>
        {{#if this.msgs}}
            {{#each msgs}}
            <li id="{{ id }}" data-comment-expanded="{{#if entryShort}}{{#if expandEntry}}true{{else}}false{{/if}}{{/if}}">
                <div class="header">
                    {{#if href}}
                        <a title="{{created_by_name}}" href="{{href}}">{{created_by_name}}</a>
                    {{else}}
                        {{created_by_name}}
                    {{/if}}
                    {{relativeTime date_entered class="relative"}}
                </div>
                <div class="body">
                    {{#if showShort}}
                        {{#if collapsed}}
                            <div class="msg-content">{{entryShort}}...</div>
                            <button data-action="toggle" class="btn btn-link btn-invisible toggle-text" data-comment-id="{{id}}">
                                {{str 'LBL_COMMENT_LOG_SHOW_MORE' ../module}}
                            </button>
                        {{else}}
                            <div class="msg-content">{{entry}}</div>
                            <button data-action="toggle" class="btn btn-link btn-invisible toggle-text" data-comment-id="{{id}}">
                                {{str 'LBL_COMMENT_LOG_SHOW_LESS' ../module}}
                            </button>
                        {{/if}}
                    {{else}}
                        <div class="msg-content">{{entry}}</div>
                    {{/if}}
                </div>
            </li>
            {{/each}}
        {{else}}
            {{#if view.collection.dataFetched}}
            <em>{{str "LBL_COMMENTS_LOG_DASHLET_NO_COMMENTS"}}</em>
            {{else}}
                <div class="block-footer tcenter">
                    {{loading 'LBL_ALERT_TITLE_LOADING'}}
                </div>
            {{/if}}
        {{/if}}
    </ul>
</div>
{{#if _showViewAll}}
<div class="block-footer tleft">
    <button data-action="showall" class="btn btn-link btn-invisible more">{{str "LBL_COMMENTS_LOG_DASHLET_VIEW_ALL"}}</button>
</div>
{{/if}}
