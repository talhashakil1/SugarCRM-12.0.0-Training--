<!--
/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
-->
<h2>Overview</h2>
<span class="lead">
    Finds recipients that match the search term.
</span>

<h2>Request Arguments</h2>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Required</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            q
        </td>
        <td>
            string
        </td>
        <td>
            The search string
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            module_list
        </td>
        <td>
            string
        </td>
        <td>
            One of the following strings: users, accounts, contacts, leads, prospects, all
            Will determine which modules are searched using the given search string.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            order_by
        </td>
        <td>
            string
        </td>
        <td>
            columns to sort by (one or more of $sortableColumns) with direction<br/>
            Example: name:asc,id:desc (will sort by last_name ASC and then id DESC)
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            offset
        </td>
        <td>
            int
        </td>
        <td>
            Offset of first record to return
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            max_num
        </td>
        <td>
            int
        </td>
        <td>
            Maximum records to return
        </td>
        <td>
            False
        </td>
    </tr>
    </tbody>
</table>

<h3>Request</h3>
<pre class="pre-scrollable">
    ?q=foo&module_list=all&order_by=name:asc,id:desc&offset=1&max_num=4
</pre>


<h2>Response Arguments</h2>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            next_offset
        </td>
        <td>
            int
        </td>
        <td>
            Returns the next offset to be used if paging ahead for more records
        </td>
    </tr>
    <tr>
        <td>
            records
        </td>
        <td>
            Array
        </td>
        <td>
            Array of records found based on the search string and module_list. Each record contains the ID, module,
            name, email address and it's ID, opt out flag of the email address, and _acl of the recipient found.
        </td>
    </tr>
    </tbody>
</table>

<h3>Response</h3>
<pre class="pre-scrollable">
{
    "next_offset": 3,
    "records": [
        {
            "id": "seed_sarah_id",
            "_module": "Users",
            "name": "Sarah Smith",
            "email": "sarah@example.com",
            "email_address_id": "962cefa8-2f1t-11e6-9bee-80e6577b09a3",
            "opt_out": false
            "_acl": {
                "fields": {
                    "assigned_user_id": {
                        "write":"no",
                        "create":"no"
                    },
                    "date_sent": {
                        "write":"no",
                        "create":"no"
                    }
                }
            }
        },
        {
            "id": "962cefa8-2f1f-11e6-9ade-80e6500b09a0",
            "_module": "Leads",
            "name": "Antonia Piermarini",
            "email": "support.sales.vegan@example.name",
            "email_address_id": "756yafa8-2f1t-11e6-9bee-80e6577b09a3",
            "opt_out": true
            "_acl": {
                "fields": {
                    "assigned_user_id": {
                        "write":"no",
                        "create":"no"
                    },
                    "date_sent": {
                        "write":"no",
                        "create":"no"
                    }
                }
            }
        },
        {
            "id": "962850e2-2f1f-11e6-804e-80e6500b09a0",
            "_module": "Leads",
            "name": "Santa Leffingwell",
            "email": "vegan.vegan@example.info",
            "email_address_id": "211uhhg4-2f1t-11e6-9bee-80e6577b09a3",
            "opt_out": false
            "_acl": {
                "fields": {
                    "assigned_user_id": {
                        "write":"no",
                        "create":"no"
                    },
                    "date_sent": {
                        "write":"no",
                        "create":"no"
                    }
                }
            }
        }
    ]
}
</pre>

<h2>Change Log</h2>
<table class="table table-hover">
    <tr>
        <th>Version</th>
        <th>Change</th>
    </tr>
    <tr>
        <td>
            v10
        </td>
        <td>
            Added <code>/Mail/recipients/find</code> GET endpoint.
        </td>
    </tr>
</table>
